(window["webpackJsonpPluginswag-pay-pal"]=window["webpackJsonpPluginswag-pay-pal"]||[]).push([[8908],{6684:function(){},8908:function(a,e,t){"use strict";t.r(e),t.d(e,{default:function(){return o}}),t(4455);let n="missing",s="invalid";var o=Shopware.Component.wrapComponentConfig({template:'{% block swag_paypal_webhook %}\n<sw-card\n    :isLoading="isFetchingStatus"\n    :disabled="isLoading"\n    class="swag-paypal-webhook"\n    position-identifier="swag-paypal-webhook-card"\n>\n    <template #title>\n        {% block swag_paypal_webhook_card_title %}\n        <span class="swag-paypal-webhook__title">\n            {{ $tc(\'swag-paypal.webhook.cardTitle\') }}\n        </span>\n\n        <sw-label\n            class="swag-paypal-webhook__label"\n            appearance="pill"\n            size="medium"\n            :variant="webhookStatusVariant"\n        >\n            <sw-color-badge :rounded="true" :variant="webhookStatusVariant" />\n            <span>{{ webhookStatusLabel }}</span>\n        </sw-label>\n        {% endblock %}\n    </template>\n\n\n    {% block swag_paypal_webhook_info_text %}\n    <span class="swag-paypal-webhook__info-text">\n        {{ $tc(\'swag-paypal.webhook.infoText\') }}\n    </span>\n    {% endblock %}\n\n    {% block swag_paypal_webhook_refresh_button %}\n    <sw-button\n        class="swag-paypal-webhook__refresh-button"\n        variant=""\n        :disabled="isLoading || isRefreshing || isFetchingStatus || !allowRefresh || !acl.can(\'swag_paypal.editor\')"\n        :isLoading="isRefreshing"\n        @click="onRefreshWebhook"\n    >\n        {{ $tc(\'swag-paypal.webhook.buttonRefresh\') }}\n    </sw-button>\n    {% endblock %}\n</sw-card>\n{% endblock %}\n',inject:["acl","SwagPayPalWebhookService"],mixins:[Shopware.Mixin.getByName("swag-paypal-notification")],props:{isLoading:{type:Boolean,required:!1,default:!1},selectedSalesChannelId:{type:String,required:!1,default:null}},data(){return{webhookStatus:null,isFetchingStatus:!1,isRefreshing:!1}},computed:{webhookStatusLabel(){return this.$tc(`swag-paypal.webhook.status.${this.webhookStatus||"unknown"}`)},webhookStatusVariant(){switch(this.webhookStatus){case n:return"danger";case s:return"warning";case"valid":return"success";default:return"neutral"}},allowRefresh(){return[s,n].includes(this.webhookStatus??"")}},created(){this.fetchWebhookStatus()},methods:{async fetchWebhookStatus(){this.isFetchingStatus=!0;let a=await this.SwagPayPalWebhookService.status(this.selectedSalesChannelId);this.webhookStatus=a.result??null,this.isFetchingStatus=!1},async onRefreshWebhook(){return this.isRefreshing=!0,await this.SwagPayPalWebhookService.register(this.selectedSalesChannelId).catch(a=>{this.createNotificationFromError({errorResponse:a,title:"swag-paypal.webhook.refreshFailed.title"})}),this.isRefreshing=!1,this.fetchWebhookStatus()}}})},4455:function(a,e,t){var n=t(6684);n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[a.id,n,""]]),n.locals&&(a.exports=n.locals),(0,t(534).A)("281eefb2",n,!0,{})}}]);